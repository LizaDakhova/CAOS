# Задачи на сети

Для закрытия блока надо решить любую задачу (если несколько, то берется максимальная оценка).
В каждой части требуется написать сервер, который общается с клиетами (socket/bind/listen/accept/recv/send/shutdown/close).

Сервер может получить SIGINT (sigaction), тогда:
* закрыть сетевые соединения с клиентами
* закрыть сокеты клиентов
* закрыть исходный сокет 
* завершить работу


## Программа a-la nc (3)
Программа получает параметр — порт и слушает на нем все адреса.
Клиенты подключаются, вводят данные — сервер выводит на экран.
Клиентом выступает программа nc или telnet (в конце строки может приходить \n или \r\n).
Клиент может ввести команду quit (с \n или \r\n) — значит надо:
* закрыть сетевое соединение с клиентом
* закрыть сокет клиента
* перейти к следующему (accept)

## Программа chat (5-6)
Дополнительные знания: распараллеливание/select/poll/…

Аналогично предыдущему варианту, но:
* несколько клиентов обрабатываются параллельно (5);
* ввод от одного клиента посылается всем остальным (6);

## Программа a-la ftp (7-9)
Требуется написать сервер и клиент.

Сервер: получает два параметра: порт и директорию. Если директория не указана — значит текущая.
Клиент: получает два параметра: хост и порт.
Клиент присоединяется к клиенту и дает возможность ввести команды (7):
* quit: завершить сеанс
* put имя_файла: передать серверу из текущей директории данный файл
* get имя_файла: получить от сервера данный файл
* ls: получить список объектов (достаточно сообщить имя, размер, тип (директория/файл))
Дополнительно (8):
* cd директория: сменить на сервере текущую директорию
* !cd директория: сменить у клиента текущую директорию
* !ls: получить локальный список объектов.
Дополнительно (+1): не давать выйти за пределы изначальной директории. 
* Пример: сервер запустили с директорией /tmp/test, есть директория /tmp/test/a:
  * cd a ; — оказались на сервере в /tmp/test/a
  * cd .. ; — оказались на сервере в /tmp/test/
  * cd .. ; не ошибка, оказались на сервере в /tmp/test/

## Программа a-la MUD (10)
Запускается сервер, ждет подключений.
Клиентом выступает программа nc или telnet (в конце строки может приходить \n или \r\n).

Клиент присоединяется, получает приглашение login, он вводит имя. Если такой уже есть — не пускают.
Логин — слово без пробелов, не больше 10 символов [a-zA-Z]. Дальше в примерах клиента зовут Test.
Каждому клиенту назначается здоровье (hp) в 100 пунктов.
Игровое период — раз в 20 секунд. Сервер пишет всем про раунд, через период времени — обрабатывает все команды, влияющие на здоровье.
Сервер поддерживает набор команд:
* who: показать, кто сейчас в сети (кто и здоровье)
* wall строка: данное сообщение появляется у всех пользователей, кроме автора, в виде Test shouts: строка
* say имя строка: сообщить данное сообщение пользователю. Его может и не быть (тогда сообщить об ошибке). Сообщение приходит в виде: Test say: 
* kill имя: атаковать пользователя с данным именем, в конце раунда от жертвы отнимается случайное (1-10) количество пунктов. Жертве сразу сообщается, что она подверглась нападению в виде: Test attacks you. Атаковать можно только одного, нападать могут несколько. 
* heal имя: лечить пользователя. Прибавляется случайное (1-10) число пунктов. Лечить можно только одного, принимать помощь можно от нескольких.

Если у пользователя заканчивается здоровье, то он «умирает». Действия сервера:
* жертве сообщается, что она умерла (You are killed) и отлогинивает.
* убийце сообщается, что он достиг цели (Test is died)
* остальным сообщается: «Somebody is dead. R.I.P.»
